<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.oseasy.initiate.modules.analysis.dao.GcontestAnalysisDao">

	<select id="getData1" resultType="java.util.HashMap">
		select '互联网+大赛'
		label,o.name,count(1) cc
		from g_contest t
		left join sys_user u on
		t.declare_id=u.id
		left join sys_office o on u.office_id=o.id
		where
		t.del_flag='0'
		group by o.name
	</select>
	<select id="getData2" resultType="java.util.HashMap">
		select tem.label,tem.name,count(1) cc from(select (case when o.graduation &lt; SYSDATE() then '毕业学生参赛' else '在校学生参赛' end) label,s1.label name
		from g_contest t
		left join sys_dict
		s1 on t.level=s1.value and
		s1.type='gcontest_level' and
		s1.del_flag='0'
		left join sys_user u on t.declare_id=u.id
		left join sys_student_expansion o on u.id=o.user_id
		where s1.id is not null and 
		t.del_flag='0' )tem
		group by tem.label,tem.name
	</select>
	<select id="getData3" resultType="java.util.HashMap">
		select '参赛项目数'
		label,s1.label name,count(1) cc
		from g_contest t
		left join sys_dict
		s1 on t.type=s1.value and
		s1.type='competition_net_type' and
		s1.del_flag='0'
		where
		t.del_flag='0' and s1.id is not null
		group by s1.label
	</select>
</mapper>